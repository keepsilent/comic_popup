zip.workerScriptsPath="./dist/js/zip/";var UnZipArchive=function(e){if(e)if(e instanceof Blob){this.entries={},this.zipReader={};var t=this;this.length=0,this.onend=r,this.onerror=r,this.onprogress=r;var n=this.defer=new $.Deferred;zip.createReader(new zip.BlobReader(e),function(e){(t.zipReader=e).getEntries(function(e){t.entries=e,n.resolve()})},this.error.bind(t))}else alert("参数不是Blob类型");else alert("参数不正确, 需要一个Blob类型的参数");function r(){}};UnZipArchive.readBlobAsDataURL=function(e,t){var n=new FileReader;n.onload=function(e){t(e.target.result)},n.readAsDataURL(e)},$.extend(UnZipArchive.prototype,{getEntries:function(){for(var e=[],t=0,n=this.entries.length;t<n;t++)e.push(this.entries[t].filename);return e},getEntry:function(e){for(var t=0,n=this.entries.length;t<n;t++)if(this.entries[t].filename===e)return this.entries[t]},download:function(r,t,i){var o=this;this.defer=this.defer.then(function(){var n=$.Deferred();if(r){if(i)return i();var e=o.getEntry(r);if(e)return e.getData(new zip.BlobWriter(zip.getMimeType(e.filename)),function(e){t?(t(e),n.resolve(e)):UnZipArchive.readBlobAsDataURL(e,function(e){console.log("dataUrl",e);var t=document.createElement("a");window.webkitURL||window.mozURL||window.URL;t.href=e,t.download=r,t.click(),n.resolve(e),o.onend()})}),n}})},loadImage:function(n,r,i,e){var o=this;this.defer=this.defer.then(function(){var t=$.Deferred();if(r){var e=o.getEntry(r);if(e)return e.getData(new zip.BlobWriter(zip.getMimeType(e.filename)),function(e){i?(i(e),t.resolve(e)):UnZipArchive.readBlobAsDataURL(e,function(e){console.log("dataUrl",n,e),ddlReader.loadImage(n,e),t.resolve(e),o.onend()})}),t}})},getData:function(t,n){"string"==typeof t?this.download(t,function(e){n&&n(e)}):"function"==typeof t&&this.download("test",null,function(e){t()})},error:function(){throw this.onerror(this),new Error("压缩文件解压失败")}});