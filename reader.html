<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" type="text/css" href="./dist/css/style.css">
</head>
<body>
    <div class="ddl-comic-reader">
        <div class="ddl-comic-reader-head">
            <div class="ddl-comic-reader-head-inner">
                <h1><i>C</i>omi<i>c</i>++</h1>
                <ul>
                    <li><a href="https://chrome.google.com/webstore/detail/comic%20%20/mhekhlkmjaleehfnfjfpejhegjieaaef" title="插件" target="_blank">插件</a></li>
                    <li><a href="https://weibo.com/u/1892036735/home?wvr=5" title="新浪微博" target="_blank">微博</a></li>
                    <li><a href="javascript:void(0);" title="Bug反馈" id="ddl-comic-reader-bug-btn">Bug反馈</a></li>
                </ul>
            </div>
        </div>
    </div>

    <!-- 上传功能 -->
    <div class="ddl-comic-reader-box ddl-comic-reader-upload-box">
        <div class="ddl-comic-reader-main">
            <h1 class="tc">更懂你的漫画阅读器！</h1>
            <div class="ddl-comic-reader-upload-area-box">
                <div class="ddl-comic-reader-upload-area" id="ddl-comic-reader-area">
                    <h3 class="title">将文件拖动到这里</h3>
                    <div class="upload-btn-box">
                        <span class="upload-btn">选择 Zip压缩文件</span>
                        <input class="upload-input" id="ddl-reader-upload-file-btn" type="file" value="" accept="application/zip">
                    </div>
                </div>
                <div class="ddl-comic-reader-scene" id="ddl-comic-reader-scene">
                    模式: <span id="ddl-comic-reader-scene-btn" data-status="0"><i id="ddl-comic-reader-scene-title">Zip压缩包</i><i class="iconfont icon-fanhui4"></i></span>
                    <em></em>
                    <ul>
                        <li data-type="zip">Zip压缩包</li>
                        <li data-type="file">纯文件夹</li>
                        <li data-type="image">批量图片</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <!-- 使用说明 -->
    <div class="ddl-comic-reader-box ddl-comic-reader-info-box">
        <div class="ddl-comic-reader-info-box-inner">
            <div>
                <h3 class="iconfont icon-zip2"></h3>
                <h6>Zip压缩包</h6>
                <p>Zip打包的压缩文件，无须手动解压；直接查看解压包的里图片文件，自动生成图片预览；选择文件上传与拖动上传皆可实现。</p>
            </div>
            <div>
                <h3 class="iconfont icon-wenjianjia"></h3>
                <h6>纯文件夹</h6>
                <p>选择文件夹，自动过滤非图片文件，自动生成图片预览。注意：拖动上传不支持该方法。</p>
            </div>
            <div>
                <h3 class="iconfont icon-piliang"></h3>
                <h6>批量图片</h6>
                <p>充许同时选择多个图片文件上传，按图片上传先后顺序,自动生成图片预览。选择文件上传与拖动上传皆可实现。</p>
            </div>
        </div>
    </div>

    <div class="tips-box" id="ddl-tips-box"></div>
    <!--<div class="floating-box" id="ddl-floating-box"></div>-->
    <input type="hidden" id="ddl-comic-page" value="reader">
</body>
</html>

    <script src="dist/js/lib/jquery.min.js" type="text/javascript"></script>
    <script src="dist/js/lib/powerange.min.js" type="text/javascript"></script>
    <script src="dist/js/zip/zip.js" type="text/javascript"></script>
    <script src="dist/js/zip/mime-types.js" type="text/javascript"></script>
    <script src="dist/js/lib/UnZipArchive.js" type="text/javascript"></script>
    <script src="dist/js/template.js" type="text/javascript"></script>
    <script src="dist/js/app.js" type="text/javascript"></script>
<script>



    //        $('#file').change(function(){
    //            var files = this.files;
    //            var file = files[0];
    //            //这里我们判断下类型如果不是图片就返回 去掉就可以上传任意文件
    //            if(!/image\/\w+/.test(file.type)){
    //                alert("请确保文件为图像类型");
    //                return false;
    //            }
    //
    //            console.log(file);
    //            var reader = new FileReader();
    //            reader.readAsDataURL(file);
    //            reader.onload = function(e){
    //                var urlsrc = this.result;
    //                console.log('urlsrc',urlsrc);
    //            }
    //        });
//    $(document).on({
//        dragleave:function(e){      //拖离
//            e.preventDefault();
//        },
//        drop:function(e){           //拖后放
//            e.preventDefault();
//        },
//        dragenter:function(e){      //拖进
//            e.preventDefault();
//        },
//        dragover:function(e){       //拖来拖去
//            e.preventDefault();
//        }
//    });

//    var box = document.getElementById('area'); //拖拽区域
//    box.addEventListener("drop",
//        function(e) {
//            e.preventDefault(); //取消默认浏览器拖拽效果
//            var fileList = e.dataTransfer.files; //获取文件对象
//            console.log(fileList);
//
//            //检测是否是拖拽文件到页面的操作
//            if (fileList.length == 0) {
//                return false;
//            }
//
//            var file = fileList[0];
//            window.un = new UnZipArchive( file );
//            un.getData( function() {
//                //获取所以的文件和文件夹列表;
//
//                var arr = un.getEntries();
//                //拼接字符串
//                var str = "";
//                for(var i=0; i<arr.length; i++ ) {
//                    //点击li的话直接下载文件;
//                    console.log('a',arr[i]);
//                    str += "<li onclick=download('"+arr[i]+"')>"+arr[i]+"</li>"
//                };
//                $("#dir").html( str );
//            });
//
//            return false;
//            //检测文件是不是图片
//            if (fileList[0].type.indexOf('image') === -1) {
//                alert("您拖的不是图片！");
//                return false;
//            }
//
//            //拖拉图片到浏览器，可以实现预览功能
//            var img = window.webkitURL.createObjectURL(fileList[0]);
//            console.log('img',img);
//            var filename = fileList[0].name; //图片名称
//            var filesize = Math.floor((fileList[0].size) / 1024);
//            if (filesize > 500) {
//                alert("上传大小不能超过500K.");
//                return false;
//            }
//            //alert(filesize);
//            var str = "![](" + img + ")<p>图片名称：" + filename + "</p><p>大小：" + filesize + "KB</p>";
//            $("#preview").html(str);
//
//        },
//        false);
//
//    $("#file").change(function (e) {
//        var file = this.files[0];
//        window.un = new UnZipArchive( file );
//        un.getData( function() {
//            //获取所以的文件和文件夹列表;
//
//            var arr = un.getEntries();
//            //拼接字符串
//            var str = "";
//            for(var i=0; i<arr.length; i++ ) {
//                //点击li的话直接下载文件;
//                console.log('a',arr[i]);
//                str += "<li onclick=download('"+arr[i]+"')>"+arr[i]+"</li>"
//            };
//            $("#dir").html( str );
//        });
//    });
//    var download = function ( filename ) {
//        un.download( filename );
//    };
</script>